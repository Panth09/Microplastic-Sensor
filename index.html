<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ANVITRA Microplastic Sensor Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <h1>ANVITRA Microplastic Sensor Visualization Dashboard</h1>
            <div class="status">
                <span id="system-status">Running</span>
                <div id="last-calibration">Last Calibration: 28/09/2025 - 01:23</div>
            </div>
        </header>

        <!-- I. Real-Time Status & Key Metrics -->
        <section class="metrics-panel">
            <h2>Real-Time Status & Key Metrics</h2>
            <div class="metrics-grid">
                <div class="metric-card">
                    <h3>Flow Rate</h3>
                    <div id="flow-rate" class="metric-value">42.5 mL/min</div>
                    <canvas id="flow-graph" width="200" height="60"></canvas>
                </div>
                <div class="metric-card">
                    <h3>Turbidity Baseline</h3>
                    <div id="turbidity" class="metric-value">0.85 NTU</div>
                </div>
                <div class="metric-card">
                    <h3>Current Count</h3>
                    <div id="current-count" class="metric-value">15 particles</div>
                </div>
                <div class="metric-card">
                    <h3>Concentration</h3>
                    <div id="concentration" class="metric-value">15 P/L</div>
                </div>
            </div>
        </section>

        <!-- II. Analytical & Trend Visualization -->
        <section class="analytical-panel">
            <h2>Analytical & Trend Visualization</h2>
            <div class="charts-grid">
                <div class="chart-card">
                    <h3>Concentration Trend</h3>
                    <canvas id="concentration-trend"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Size Distribution</h3>
                    <canvas id="size-distribution"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Polymer Type Breakdown</h3>
                    <canvas id="polymer-breakdown"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Raw Sensor Pulses</h3>
                    <canvas id="sensor-pulses"></canvas>
                </div>
            </div>
        </section>

        <!-- III. Visual Confirmation & Classification -->
        <section class="visual-panel">
            <h2>Visual Confirmation & Classification</h2>
            <div class="visual-grid">
                <div class="image-gallery">
                    <h3>Image Gallery</h3>
                    <div id="image-thumbnails">
                        <img src="https://raw.githubusercontent.com/Panth09/Microplastic-Sensor/main/a1.jpeg" alt="Microplastic Fiber" onclick="showFullImage(this)">
                        <img src="https://raw.githubusercontent.com/Panth09/Microplastic-Sensor/main/a2.jpeg" alt="Microplastic Fragment" onclick="showFullImage(this)">
                        <img src="https://raw.githubusercontent.com/Panth09/Microplastic-Sensor/main/a3.jpeg" alt="Microplastic Film" onclick="showFullImage(this)">
                    </div>
                </div>
                <div class="classification-panel">
                    <h3>ML Classification</h3>
                    <p id="classification-result">Type: Fiber, Confidence: 98%</p>
                    <h3>Morphology Log</h3>
                    <p id="morphology-log">Fibers: 12 | Fragments: 3</p>
                    <h3>Rejection Log</h3>
                    <p id="rejection-log">Rejected: 5 (Bubbles: 3, Coincidences: 2)</p>
                </div>
            </div>
        </section>

        <!-- IV. Data Logging & Reporting -->
        <section class="logging-panel">
            <h2>Data Logging & Reporting</h2>
            <div class="logging-grid">
                <div class="logging-card">
                    <h3>Storage Status</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="storage-progress" style="width: 65%"></div>
                    </div>
                    <p id="storage-status">65% used (2.1 GB / 32 GB)</p>
                </div>
                <div class="logging-card">
                    <h3>Connectivity Status</h3>
                    <p id="connectivity-status">MQTT Connected | Last Update: 01:23:15</p>
                </div>
                <div class="export-buttons">
                    <button onclick="exportData('csv')">Export CSV</button>
                    <button onclick="exportData('excel')">Export Excel</button>
                    <button onclick="generateReport()">Generate PDF Report</button>
                </div>
            </div>
        </section>

        <!-- Modal for Full Image -->
        <div id="image-modal" class="modal">
            <span class="close" onclick="closeModal()">x</span>
            <img id="modal-image" class="modal-content">
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
